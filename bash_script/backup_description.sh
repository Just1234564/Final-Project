#!/bin/bash

# Функция для отображения справки
function show_help {
    echo "Использование: $0 [путь_к_каталогу_или_файлу]"
    echo "Создает резервную копию указанных файлов или каталогов."
    exit 1
}
Обьяснение:(Описание: Определяет функцию show_help, которая выводит информацию о том, как использовать скрипт.
$0: Имя самого скрипта, используется для отображения в сообщении.
exit 1: Завершает выполнение скрипта с кодом ошибки 1, что указывает на неправильное использование.)

# Проверка на наличие аргументов
if [ $# -eq 0 ]; then
    show_help
fi

Обьяснение($#: Переменная, содержащая количество переданных аргументов.
-eq 0: Проверяет, равно ли количество аргументов нулю.
Если условие истинно: Вызывает функцию show_help, чтобы показать пользователю, как правильно использовать скрипт.)

# Папка для резервных копий
BACKUP_DIR="$HOME/backup"
mkdir -p "$BACKUP_DIR"

Обьяснение:(BACKUP_DIR="$HOME/backup": Определяет переменную BACKUP_DIR, указывающую на директорию для хранения резервных копий в домашней папке пользователя.
BACKUP_DIR="$HOME/backup":
Здесь вы создаете переменную BACKUP_DIR, которая содержит путь к директории для резервных копий. 
"$HOME" — это переменная, указывающая на вашу домашнюю директорию, а backup — это имя папки, которая будет создан
mkdir -p "$BACKUP_DIR": Создает директорию backup, если она не существует. Флаг -p позволяет создать промежуточные директории.)

# Дата для имени файла резервной копии
DATE=$(date +"%Y%m%d_%H%M%S")

Обьяснение:(Описание: Использует команду date для получения текущей даты и времени в формате ГГГГММДД_ЧЧММСС.
Зачем это нужно: Это позволяет создать уникальное имя файла резервной копии, чтобы избежать перезаписи предыдущих резервных копий.)

# Создание имени файла резервной копии
BACKUP_FILE="$BACKUP_DIR/backup_$DATE.tar.gz"

Обьяснение:(Описание: Определяет полное имя файла резервной копии, включая путь, имя и расширение .tar.gz.
Таким образом, строка BACKUP_FILE="$BACKUP_DIR/backup_$DATE.tar.gz" формирует полное имя файла резервной копии, которое будет выглядеть, 
например, так: /home/user/backup/backup_2024-09-09.tar.gz, если переменные $BACKUP_DIR и $DATE имеют соответствующие значения.
Зачем это нужно: Это имя будет использоваться для сохранения архива, который будет создан)

# Создание резервной копии
tar -czf "$BACKUP_FILE" "$@"

Обьяснение:(tar -czf: Команда для создания архива:
c: Создать новый архив.
z: Сжать архив с помощью gzip.
f: Указать имя файла архива.
"$BACKUP_FILE": Указывает, куда сохранить архив.
"$@": Передает все аргументы, которые были переданы скрипту, в команду tar. Это могут быть файлы или каталоги, которые нужно заархивировать.)

# Проверка на успешное выполнение
if [ $? -eq 0 ]; then
    echo "Резервная копия успешно создана: $BACKUP_FILE"
else
    echo "Произошла ошибка при создании резервной копии."
fi

Обьяснение:($?: Переменная, содержащая код возврата последней выполненной команды (в данном случае — команды tar).
-eq 0: Проверяет, равен ли код возврата нулю (что означает успешное выполнение).
Если условие истинно: Выводит сообщение об успешном создании резервной копии с указанием пути к файлу.
Если условие ложно: Выводит сообщение об ошибке, если резервная копия не была создана.)